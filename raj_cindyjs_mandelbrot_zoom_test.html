
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Cindy JS</title>
        <script type="text/javascript" src="https://cindyjs.org/dist/latest/Cindy.js"></script>
        <script type="text/javascript" src="https://cindyjs.org/dist/latest/CindyGL.js"></script>
			  <link rel="stylesheet" type="text/css" href="style.css">
    </head>

    <body style="font-family: Arial">

        <script id="csdraw" type="text/x-cindyscript">
            colorplot(A, B, "plot", iter(0, complex(#) )
            );
            drawimage(A0, B0, "plot");
						// drawtext( mouse().xy, A.x + (mouse().x+10)/20 * (B-A).x  + ", " + 
						// 											( A.y + (mouse().y+10)/20 * (B-A).x ) 	);
						drawtext(B0 + (-4,1), "Iterations: " + maxIts,
						size -> 15, color -> (1,1,1) );
						drawtext(B0 + (-4,0.2), "Zoom: " + round(10* (A0-B0).x / (A-B).x)/10,
						size -> 15, color -> (1,1,1) );
        </script>

        <script id="csmousedown" type="text/x-cindyscript">
            clickCoords = mouse().xy;
						clickCoordsAB = ( A.x + (mouse().x+10)/20 * (B-A).x,
														  A.y + (mouse().y+10)/20 * (B-A).x );
						
            moveFactor =  0.8;
						maxIts = maxIts + 10;
            A = clickCoordsAB + (A - clickCoordsAB) * moveFactor ; 
            B = clickCoordsAB + (B - clickCoordsAB) * moveFactor ;  
        </script>
			

        <script id="csinit" type="text/x-cindyscript">
            A0 = A;
            B0 = B;
            use("CindyGL");
            createimage("plot",500,500);

            f(z, c) := z*z+c;
            maxIts = 50;
						
            iter(z, c) := (
              timeToEscape = 0;
              l0 = abs(z);
              repeat(maxIts,
                if(l0<=4,
                  z = f(z, c);
                  l1 = abs(z);
                  timeToEscape = timeToEscape + 1;
                  l0 = l1;
                )
              );
							if(timeToEscape >= maxIts,
								gray(0),
								hue(timeToEscape/maxIts)
                // hue(im(log(z))/(2*pi)), //phase of z
                // gray(1.0 - timeToEscape/ maxIts) 
              )
            );
        </script>

        <div id="CSCanvas" style="width: 500px; height: 500px; border: 2px solid #000000"></div>

        <script type="text/javascript">
            var gslp = [
                { name: "A", kind: "P", type: "Free", visible: false, pos: [-10, -10] },
                { name: "B", kind: "P", type: "Free", visible: false, pos: [10, -10] },
                { name: "C", kind: "P", type: "Free", visible: false, pos: [0, 0] },
            ];
            CindyJS({ canvasname: "CSCanvas", scripts: "cs*", geometry: gslp });
        </script>
    </body>
</html>
